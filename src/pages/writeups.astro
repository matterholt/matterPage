---
import Main from "@layouts/html/Main.astro";
import BlogMain from "@layouts/sections/BlogMain.astro";
import PostListingLink from "@components/site_writeup/PostListingLink.astro";
import {
  writeUpPostListings,
  sortDates,
} from "@utils/helpers/blog_dates/index";

const currentYearsPost = await Astro.glob("../pages/posts/2023/**/*.md");
let currentYearsPost_sorted = sortDates(currentYearsPost);
const previousYearsPost = await Astro.glob("../pages/posts/2022/**/*.md");
let previousYearsPost_sorted = sortDates(previousYearsPost);

const latestPost = currentYearsPost[0];

// TODO, sort post, clean data up
---

<Main pageId="writeups">
  <BlogMain>
    <section class="blog_sections">
      <h3 class="section_header">Latest Published</h3>

      <PostListingLink url={latestPost.url} postGlob={latestPost.frontmatter} />
    </section>

    <section class="blog_sections">
      <h3 class="section_header">Other Post</h3>
      <ul class="list_container">
        {
          currentYearsPost_sorted.map((post) => (
            <li class="list">
              <PostListingLink url={post.url} postGlob={post.frontmatter} />
            </li>
          ))
        }
      </ul>
    </section>
    {
      previousYearsPost_sorted ? (
        <section>
          <h3>Previous Year</h3>
          <ul>
            {previousYearsPost_sorted.map((post) => (
              <li>
                <PostListingLink url={post.url} postGlob={post.frontmatter} />
              </li>
            ))}
          </ul>
        </section>
      ) : null
    }
  </BlogMain>
</Main>

<style>
  .blog_sections {
    margin-bottom: 100px;
  }
  .section_header {
    font-weight: 700;
    font-size: 30px;
    margin: 50px 0px;
    text-transform: uppercase;
    text-align: center;
    width: 100%;
  }

  .list_container {
    margin-bottom: 50px;
  }
  .list {
    margin: 25px 0px;
  }
</style>
<script></script>
